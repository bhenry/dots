# Get the image name from the Dockerfile in the present working directory
IMG=`grep FROM Dockerfile`
# Remove the FROM from the line
IMG=${IMG##* }
# Pull the image so it gets listed in `docker image ls`
docker pull $IMG
# Get the platform from the image
PLATFORM=`docker inspect --format="{{.Os}}/{{.Architecture}}" $IMG`
NEWFROM="FROM --platform=$PLATFORM $IMG"
# Replace the FROM line in the Dockerfile with the new FROM line
sed -i "" "s|FROM.*|$NEWFROM|g" Dockerfile
